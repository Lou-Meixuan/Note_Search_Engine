# Note_Search_Engine

本项目是一个结合 Google 搜索 与 GoodNotes 笔记管理理念的混合型搜索引擎系统，支持用户上传本地文件并搜索个人笔记，同时也可以搜索来自远程 URL 或其他用户共享的文档内容。

系统将本地上传文件与远程文档统一抽象为同一种文档模型，通过 tokenization（分词）、倒排索引（Inverted Index） 和 TF‑IDF / BM25 排序算法实现高效、可扩展的全文搜索。用户在搜索时可以自由选择仅搜索本地文件、仅搜索远程文档，或在全部数据源中进行联合搜索。

在架构设计上，本项目严格遵循 Clean Architecture 原则，将业务核心（搜索、索引、排名）与具体框架和技术实现（Express、文件系统、数据库）解耦，使系统具备良好的可维护性、可测试性和扩展性。未来可在不破坏核心逻辑的前提下，引入 语义搜索（Embedding）、权限控制、搜索推荐等高级功能。

## MVP
1. IngestLocalDocument
接收用户上传的本地文件，提取文本内容并存储为可索引的文档。

2. IngestRemoteDocument
从给定的 URL 或远程来源抓取内容，解析文本并存储为公共文档。

3. BuildIndex
对已有文档进行分词并构建倒排索引，用于后续高效搜索。

4. SearchDocuments
接收用户查询，对文档进行检索、排序，并返回搜索结果（支持 local / remote / all 过滤）。

5. GetDocument
根据文档 ID 获取文档的完整内容与元信息，用于详情页展示。

⭐ 推荐选做 Use Cases（产品感明显提升）

6. SearchByField
支持按指定字段（如标题或正文）进行搜索。

7. GenerateSnippet
根据查询词从文档中生成包含高亮关键词的摘要片段。

8. ReindexAll / RefreshIndex
在文档更新后重新构建索引，保证搜索结果最新。

🚀 加分 / 挑战型 Use Cases（时间允许再做）

9. SuggestQuery
当搜索结果较少或无结果时，给出拼写纠错或相似查询建议。

10. Autocomplete
在用户输入搜索词时提供实时联想补全建议。

11. ImportCorpus
批量导入文件夹或数据集中的文档并统一索引。

12. TrackSearchAnalytics
记录搜索行为与点击结果，用于分析热门查询或文档。

13. DeleteDocument
从系统中删除指定文档，并同步更新索引。

14. UpdateDocument
修改已有文档内容并触发索引更新。

# Q and A

**Q:**

怎么像google那样可以搜索很多的website

**A:** 

### 路线 A：

做“垂直搜索”——搜很多网站，但限定范围（最推荐）
你们做一个小爬虫，只爬你们允许/选择的一批站点（比如课程资料站、新闻站、某些博客、你们收集的 URL 列表）。

从一批 seed URLs 开始（数据库里存 URL）

解析 HTML → 提取正文文本 → tokenize → 倒排索引

定期更新（比如每天/每小时跑一次）

这就是“像 Google 的方式”，但规模可控、可 demo、也更符合课程项目。

### 路线 B：

直接接入 Google 的搜索结果（最快“像 Google”）
如果你想立刻能搜很多网站，而不是自己爬+建索引，那就用 Google Programmable Search / Custom Search JSON API：你发 query，它返回 Google 的搜索结果。

优点：最像 Google、集成快

缺点：你们自己的 token/index/ranking 就“用不上太多”（更像调用外部搜索）

价格方面：官方文档写的是每天 100 次免费，超出后 $5/1000 次（并有每日上限）。

### 路线 C：

用 Common Crawl 这种开放网页语料（数据量大但工程更重）
Common Crawl 提供公开的网页抓取数据（非常大），适合做“研究/离线索引”的搜索引擎。

优点：真的“很多网站内容”

缺点：数据很大、处理链路重，不太适合短周期做完整闭环（但可以抽子集）

**Q:**

怎么“像 terminal 一样列出桌面全部文件”

**A：**

让用户“选择文件/文件夹”，你再列出来（可行）
用户点按钮 → 系统弹窗 → 选择 桌面文件夹 或某个文件夹
你就能拿到那个文件夹里（或用户选中的）的文件列表和内容（用于索引/搜索）
但依然：你拿不到“真实绝对路径”，而是浏览器给你的“被授权的文件句柄/相对路径信息”




